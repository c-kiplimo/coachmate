<div class="row">
  <div class="d-flex justify-content-between mt-2">
    <div class="col  mt-4" style="margin-left: 5px;">
      <h3 class="fw-semi-bold fs-5 f-weight ">Dashboard</h3>
    </div>
    <div>
      <button *ngIf="this.userRole != 'COACH' && this.userRole != 'CLIENT'" class="btn btn-outline-success m-1"
        routerLink="/addCoach"><i class="fa fa-plus"></i> Add Coach</button>
      <button *ngIf="this.userRole != 'CLIENT'" class="btn btn-outline-success m-1" routerLink="/addclient"><i
          class="fa fa-plus"></i> Add Client</button>
      <button *ngIf="this.userRole != 'CLIENT'" class="btn btn-outline-success m-1" routerLink="/add-contract"><i
          class="fa fa-plus"></i> Add
        Contract</button>
      
      <button *ngIf="this.userRole != 'CLIENT'" class="btn btn-outline-success m-1" routerLink="/addSession"><i
          class="fa fa-plus"></i> Add
        Session</button>
    </div>
  </div>
</div>

<div class="row dashboard-banner d-flex justify-content-between align-items-center p-3">
  <div class="col-10 text-center p-3 mb-10">
    <h2 class="fw-bold" *ngIf="this.userRole == 'ORGANIZATION'">
      Hello {{orgName | lowercase }},
      <span class="fw-light">
        Welcome back!
      </span>
    </h2>
    <h2 class="fw-bold" *ngIf="this.userRole == 'COACH'">
      Hello {{user.firstName| lowercase }},
      <span class="fw-light">
        Welcome back!
      </span>
    </h2>
    <h2 class="fw-bold" *ngIf="this.userRole == 'CLIENT'">
      Hello {{user.fullName| lowercase }},
      <span class="fw-light">
        Welcome back!
      </span>
    </h2>
  </div>
</div>

<div class="row">
  <div class="col-10">
    <p class="p-3 desc ">Hello {{user.firstName| lowercase }}, Here's how things currently look like...</p>
  </div>
</div>


<div class="row" *ngIf="this.userRole != 'ORGANIZATION'">
  <div class="col-6">
    <div class="card upcomingSessions">
      <div class="card-body d-flex justify-content-between">
        <h5 class="card-title  f-weight fw-semi-bold fs-6">Upcoming Sessions</h5>
        <a [routerLink]="['/sessions']">
          <span class="seeAll float-end">View all <i class="fas fa-arrow-right"></i></span>
        </a>
      </div>


      <div class="upcomingsessions list-container container">
        <table class="table" *ngIf="sessions?.length">
          <thead>
            <th>Name</th>
            <th>Date</th>
            <th>Start Time</th>
            <th>End Time</th>
            <th>Venue</th>
            <th>Status</th>
            <th>Actions</th>
          </thead>
          <tbody class="list-container">
            <tr *ngFor="let session of sessions">
              <td>{{ session.name }}</td>
              <td>{{ session.sessionSchedulesSessionDate  }}</td>
              <td>{{ session.sessionSchedulesStartTime  }}</td>
              <td>{{ session.sessionSchedulesEndTime }}</td>
              <td>{{ session.sessionVenue | titlecase }}</td>
              <td>
                <span class="badge" [ngClass]="{
                    'badge-success': session.sessionStatus === 'CONFIRMED',
                    'badge-danger': session.sessionStatus === 'CANCELLED',
                    'badge-primary': session.sessionStatus === 'NEW' || session.sessionStatus === 'CONDUCTED'
                  }">{{ session.sessionStatus }}</span>
              </td>
              <td class="view">
                <a [routerLink]="['/sessionView/', session.id]"><i class="fas fa-external-link-alt"></i></a>
              </td>

            </tr>
          </tbody>
        </table>
        <div class="donut-wrapper" *ngIf="loading" [@fadeIn]>
          <div class="donut multi"></div>
        </div>
        <p class="text-muted mt-5" *ngIf="!loading && !sessions?.length">
          No Sessions Yet.
        </p>
      </div>

    </div>
  </div>
  <div class="col-6">
    <div class="card upcomingSessions">
      <div class="card-body d-flex justify-content-between">
        <h5 class="card-title fw-semi-bold f-weight fs-6">Recent Contracts</h5>
        <a [routerLink]="['/contracts']">
          <span class="seeAll float-end">View all <i class="fas fa-arrow-right"></i></span>
        </a>
      </div>
      <div class="upcomingsessionsTable list-container container "> 
        <table class="table" *ngIf="contracts?.length">
          <thead>
            <!-- <th colspan="1">Title</th> -->
            <th colspan="1">Client</th>
            <th colspan="1">Start Date</th>
            <th colspan="1">End Date</th>
            <th colspan="1">Status</th>
            <th colspan="1">Actions</th>
          </thead>
          <tbody>
            <tr *ngFor="let contract of contracts">
              <!-- <th>{{ contract?.coachingTopic}}</th> -->
              <td>{{ contract?.clientFullName }}</td>
              <td>{{ contract?.startDate | date : "MMM d, y" }}</td>
              <td>{{ contract?.endDate | date : "MMM d, y" }}</td>
              <td>
                <span class="badge" [ngClass]="{
                    'badge-success': contract?.contractStatus === 'SIGNED' || contract?.contractStatus === 'FINISHED',
                    'badge-danger': contract?.contractStatus === 'ONGOING',
                    'badge-primary': contract?.contractStatus === 'NEW'
                  }">{{ contract?.contractStatus }}</span>
              </td>
              <td class="view">
                <a [routerLink]="['/contractDetail/', contract.id]"><i class="fas fa-external-link-alt"></i></a>
              </td>
            </tr>
          </tbody>
        </table>
        <div class="donut-wrapper" *ngIf="loading" [@fadeIn]>
          <div class="donut multi"></div>
        </div>
        <p class="text-muted mt-5" *ngIf="!loading && !contracts?.length">
          No Contracts Yet.
        </p>
      </div>
    </div>
  </div>
</div>
<div class="row" *ngIf="this.userRole == 'ORGANIZATION'">
  <div class="col-md-12">
    <div class="card upcomingSessions">
      <div class="card-body d-flex justify-content-between">
        <h3 class="card-title fw-bold">Coaches</h3>
        <a [routerLink]="['/coaches']">
          <span class="seeAll float-end">View all <i class="fas fa-arrow-right"></i></span>
        </a>
      </div>
      <div class="card-body">   <!-- upcomingsessionsTable list-container container -->
        <table class="table" *ngIf="coachesImpl?.length">
          <thead>
            <th colspan="1">Name</th>
            <th colspan="1">Email</th>
            <th colspan="1">Phone</th>
            <th colspan="1">Created On</th>
            <th colspan="1">Status</th>
            <th colspan="1">Actions</th>
          </thead>
          <tbody class="list-container">
            <tr *ngFor="let coach of coachesImpl">
              <td>{{ coach.fullName }}</td>
              <td>{{ coach.email}}</td>
              <td>{{ coach.msisdn }}</td>
              <td>{{ coach.createdAt | date: "MMM d y"}}</td>

              <td>
                  <span class="badge" [ngClass]="{
                    'badge-success': coach?.coachStatus === 'ACTIVE' || coach?.coachStatus === 'NEW',
                    'badge-danger': coach?.coachStatus === 'SUSPENDED',
                    'badge-primary': coach?.coachStatus === 'CLOSED'
                  }">
                    {{ coach.coachStatus }}</span>

              <td class="view">
                <a [routerLink]="['/coachView', coach.id]"><i class="fas fa-external-link-alt"></i></a>
                <!-- <button type="button" class="btn btn-sm btn-success" routerLink="/editclient/{{coach.id}}">View</button> -->
              </td>

            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<div class="row row-height" *ngIf="this.userRole == 'COACH'">
  <!-- <div class="col-3 card text-center top-cards">
          <div class="card-body">
            <h6 class="card-title">Upcoming Sessions</h6>
            <h3 class="card-text fw-bold">{{numberOfSessions}}</h3>
            
          </div>
      </div> -->
  <!-- <div class="col-3 card text-center top-cards">
    <div class="card-body">
      <h6 class="card-title">Coaching Hours</h6>
      <h3 class="card-text fw-bold">{{numberOfHours}} hrs {{numberOfMinutes}} mins</h3>

    </div>
  </div> -->
  <!-- <div class="col-3 card text-center top-cards" >
      <div class="card-body">
        <h6 class="card-title">Coach Education</h6>
        <h3 class="card-text fw-bold">{{ numberOfHours }} hrs</h3>
        <button type="button" routerLink="/AddTraining" class="btn addbtn"><i class="fa fa-plus"></i> Add Training</button>
        
      </div>
  </div> -->
  <!-- <div class="col-3 card text-center top-cards">
    <div class="card-body">
      <h6 class="card-title">Sessions Created</h6>
            <h3 class="card-text fw-bold">{{numberOfSessions}}</h3>
      <h6 class="card-title">Sessions Success Rate</h6>
      <h3 class="card-text fw-bold">{{success_rate_percent}}%</h3>
    </div>
  </div> -->
  <div class="col-3 card text-center top-cards">
    <div class="card-body">
      <h6 class="card-title fw-semi-bold f-weight fs-6">Clients</h6>
      <h3 class="card-text fw-bold">{{numberOfClients}}</h3>
    </div>
  </div>
  <div class="col-3 card text-center top-cards">
    <div class="card-body">
      <h6 class="card-title fw-semi-bold f-weight fs-6">Contracts</h6>
      <h3 class="card-text fw-bold">{{numberOfContracts}}</h3>
    </div>
  </div>
</div>

<!--ORGANIZATION-->
<div class="row row-height" *ngIf="this.userRole == 'ORGANIZATION'">

  <div class="col-3 card text-center top-cards">
    <div class="card-body">
      <h6 class="card-title fw-semi-bold f-weight fs-6">Number of Coaches</h6>
      <h3 class="card-text fw-bold">{{numberofCoaches}}</h3>
    </div>
  </div>
  <div class="col-3 card text-center top-cards">
    <div class="card-body">
      <h6 class="card-title fw-semi-bold f-weight fs-6">Number of Clients</h6>
      <h3 class="card-text fw-bold">{{numberOfClients}}</h3>
    </div>
  </div>
  <div class="col-3 card text-center top-cards">
    <div class="card-body">
      <h6 class="card-title fw-semi-bold f-weight fs-6">Number of Contracts</h6>
      <h3 class="card-text fw-bold">{{numberOfContracts}}</h3>
    </div>
  </div>
</div>
