<div class="row">
    <div class="col-10">
        <h3></h3>
    </div>
    <div class="col-2">
        <app-user></app-user>
    </div>
</div>

<br>
<div class="row">
  <div class="col-2"></div>
  <div class="col-8">

<div class="card details-card">
  <div class="d-flex justify-content-between mb-3 flex-wrap" [@fadeIn]>
    <div>
      <h5 class="section-title">Client View</h5>
    </div>
    <div class="d-flex">
      <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#editClientModal"
      >
        <i class="fas fa-edit"></i>
        Edit
      </button>
      <div class="dropdown">
        <a class="btn btn-refresh dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
          data-bs-toggle="dropdown" aria-expanded="false">
          Actions</a>
          <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
            <li (click)="statusState('ACTIVE')"><a class="dropdown-item"
                data-bs-toggle="modal" data-bs-target="#confirmStatusChange"
                >Activate</a></li>
            <li (click)="statusState('SUSPENDED')"><a class="dropdown-item"
              data-bs-toggle="modal" data-bs-target="#confirmStatusChange"
              >Suspend</a></li>
              <li (click)="statusState('CLOSED')"><a class="dropdown-item"
                data-bs-toggle="modal" data-bs-target="#confirmStatusChange">Close</a></li>
          </ul>
      </div>
     
    </div>
  </div>

  <div class="donut-wrapper" *ngIf="loadingClient" [@fadeIn]>
    <div class="donut multi">
      
    </div>
  </div>

    <div class="client-details" *ngIf="clients">
      <div class="client-details" *ngIf="!loadingClient && clients" [@fadeIn]>
        <div class="d-flex justify-content-between onedetail">
          <span class="title">Client Id</span>
          <span class="value">{{clients.id}}</span>
        </div>
        <div class="d-flex justify-content-between onedetail">
          <span class="title">Client Name</span>
          <span class="value">{{clients.firstName + " " + clients.lastName | titlecase}}</span>
      </div>
      <div class="d-flex justify-content-between onedetail">
        <span class="title">Client email</span>
        <span class="value">{{clients.email_address}}</span>
      </div>
      <div class="d-flex justify-content-between onedetail">
        <span class="title">Client Phone</span>
        <span class="value">{{clients.msisdn}}</span>
      </div>
      <div class="d-flex justify-content-between onedetail">
        <span class="title">Client Address</span>
        <span class="value">{{clients.physical_address}}</span>
      </div>
      <div class="d-flex justify-content-between onedetail">
        <span class="title">Profession</span>
        <span class="value">{{clients.profession}}</span>
      </div>
      <div class="d-flex justify-content-between onedetail">
        <span class="title">Reason</span>
        <span class="value">{{clients.reason}}</span>
      </div>
      <div class="d-flex justify-content-between onedetail">
        <span class="title">Payment Mode</span>
        <span class="value">{{clients.payment_mode}}</span>
      </div>
      <div class="d-flex justify-content-between onedetail">
        <span class="title">Status</span>
        <span class="value">{{clients.status}}</span>
      </div>
      <div class="d-flex justify-content-between onedetail">
        <span class="title">Created By</span>
        <span class="value">{{clients.createdBy}}</span>
      </div>
      <div class="d-flex justify-content-between onedetail">
        <span class="title">Created On</span>
        <span class="value">{{clients.createdAt}}</span>
      </div>
      <div class="d-flex justify-content-between onedetail">
        <span class="title">Last Updated</span>
        <span class="value">{{clients.lastUpdatedAt}}</span>
      </div>
  </div>

</div>
<div class="col-2"></div>
</div>

    <div class="col-5">
        <h6>Client Name:{{clients.name}}</h6>
        <h6>Client Email: {{clients.email_address}}</h6>
        <h6>Client Phone Number: {{clients.msisdn}}</h6>
        <h6>Client Profession: {{clients.profession}}</h6>
        
    </div>
    <div class="col-5">
        <h6>Client Group/Individual: {{clients.type}}</h6>
        <h6>Client Added On: {{clients.id}}</h6>
        <h6>Client Status:{{clients.status}}</h6>
</div>
<div class="row">
    <div class="col-10">
        <h3> Contracts</h3>
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Contract Name</th>
                    <th scope="col">Contract Date</th>
                    <th scope="col">Contract Time</th>
                    <th scope="col">Contract Duration</th>
                    <th scope="col">Contract Status</th>
                    <th scope="col">Actions</th>
                </tr>
            </thead>
        </table>
</div>
<div class="row">
    <table class="table">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">session Name</th>
            <th scope="col">session Date</th>
            <th scope="col">Session Venue</th>
            <th scope="col">Session Type</th>
            <th scope="col">Starts at</th>
            <th scope="col">Ends at</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let session of sessions">
            <th scope="row">{{session.id}}</th>
            <td>{{session.name}}</td>
            <td>{{session.sessionDate}}</td>
            <td>{{session.sessionVenue}}</td>
            <td>{{session.sessionType}}</td>
            <td>{{session.sessionStartTime | date: "hh:mm a"}}</td>
            <td>{{session.sessionEndTime | date: "hh:mm a"}}</td>
            <td class="actions">
                <i class="fa-solid fa-arrow-up-right-from-square"></i>
                <i class="fa-solid fa-pen-to-square"></i>
                <i class="fa-solid fa-trash-can"></i>
            </td>
          </tr>
        </tbody>
      </table>
</div> -->


      



<!-- Modal -->
<div class="modal fade" id="editClientModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-x1">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Edit Client</h5>
        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
       <form [formGroup]="updateClient">
        <div class="mb-3 form-group">
          <label for="firstName" class="form-label">First Name</label>
          <input type="text" class="form-control" id="firstName" name="firstName" formControlName="firstName"
          value="{{ clientToBeUpdated?.firstName }}"/>
        </div>
        <div class="mb-3 form-group">
          <label for="lastName" class="form-label">Last Name</label>
          <input type="text" class="form-control" id="lastName" name="lastName" formControlName="lastName"
          value="{{ clientToBeUpdated?.lastName }}">
        </div>
        <div class="mb-3 form-group">
          <label for="email_address" class="form-label">Email</label>
          <input type="text" class="form-control" id="email_address" name="email_address" formControlName="email_address"
          value="{{ clientToBeUpdated?.email_address }}">
        </div>
        <div class="mb-3 form-group">
          <label for="msisdn" class="form-label">Phone Number</label>
          <input type="text" class="form-control" id="msisdn" name="msisdn" formControlName="msisdn"
          value="{{ clientToBeUpdated?.msisdn }}">
        </div>

        <div class="mb-3 form-group">
          <label for="physical_address" class="form-label">Address</label>
          <input type="text" class="form-control" id="physical_address" name="physical_address" formControlName="physical_address"
          value="{{ clientToBeUpdated?.physical_address}}">
        </div>
        <div class="mb-3 form-group">
          <label for="reason" class="form-label">Reason</label>
          <input type="text" class="form-control" id="reason" name="reason" formControlName="reason"
          value="{{ clientToBeUpdated?.reason}}">
        </div>
        <div class="input-group mb-3">
          <div class="input-group-prepend">
            <label class="input-group-text" for="PaymentMode">Payment Mode</label>
          </div>
          <select class="form-select" id="inputGroupSelect01" formControlName="payment_mode"
          value="{{ clientToBeUpdated?.payment_mode }}">
            <option selected>Select Payment Mode</option>
            <option value="PREPAY">PREPAY</option>
            <option value="POSTPAY">POSTPAY</option>
          </select>
        </div>
        <div class="input-group">
          <div class="input-group-prepend">
            <label class="input-group-text" for="clientType">Client Type</label>
          </div>
          <select class="form-select" id="inputGroupSelect01" formControlName="type" 
          value="{{ clientToBeUpdated?.type }}">
            <option selected>Select Client type</option>
            <option value="INDIVIDUAL">INDIVIDUAL</option>
            <option value="CORPORATE">CORPORATE</option>
            <option value="GROUP">GROUP</option>
          </select>
        </div>
       </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-cancel" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary"
        (click)="updateClientDetails()"
        >Save changes</button>
      </div>
    </div>
  </div>
</div>

  <!-- Activate modal -->
  <div
    class="modal fade bd-example-modal-lg"
    id="confirmStatusChange"
    tabindex="-1"
    aria-labelledby="exampleModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Confirm</h1>

          <button
            type="button"
            class="btn-close btn-close-white"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body">
          <div class="d-flex justify-content-between">
            <h6>Confirm you want to {{this.showStatus}} this client</h6>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-cancel" data-bs-dismiss="modal">
            Close
          </button>
          <button
            type="button"
            class="btn btn-success"
            data-bs-dismiss="modal"
            (click)="changeClientStatus()"
          >
            Confirm
          </button>
        </div>
      </div>
    </div>
  </div>
